{"createdAt":"2025-07-02T13:50:20.895Z","updatedAt":"2025-07-02T14:11:14.000Z","id":"hEe8et1oeFLlVIp4","name":"Post News","active":false,"isArchived":false,"nodes":[{"parameters":{"jsCode":"const body = items[0].json.body;\nconst binaryImage = items[0].binary.data0;\n\nlet processedSummary = body.summary;\n\n// Opcional: Si los caracteres especiales son literales \\n, \\\" que no deberían estar ahí\n// y no son parte del JSON, puedes limpiar:\n// processedSummary = processedSummary.replace(/\\\\n/g, ' ').replace(/\\\\\"/g, '\"');\n// Ten cuidado con esto, ya que puede eliminar escapes necesarios si el texto es complejo.\n\n// Asegurarse de que el summary es una string y limpiar espacios extra\nprocessedSummary = String(processedSummary).trim();\n\nconst base64Image = Buffer.from(binaryImage.data, 'base64').toString('base64');\n\nreturn [\n  {\n    json: {\n      title: body.title,\n      date: new Date(body.date), // Asegúrate que body.date sea un formato de fecha válido para new Date()\n      summary: processedSummary,\n      hint: body.hint,\n      image: base64Image\n    }\n  }\n];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-60,-120],"id":"65ee0235-02ec-4ecf-aa71-ffd00cd47742","name":"Code"},{"parameters":{"operation":"insert","collection":"aifx_news","fields":"=title, date, summary, hint, image","options":{}},"type":"n8n-nodes-base.mongoDb","typeVersion":1.2,"position":[160,-120],"id":"dc673b58-e167-4692-bb5b-ae967a191cb5","name":"MongoDB","credentials":{"mongoDb":{"id":"anxhbPr54h2LJLDB","name":"MongoDB Devcloud"}}},{"parameters":{"httpMethod":"POST","path":"post-noticias","options":{"binaryPropertyName":"data"}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-280,-120],"id":"9f876e74-222c-4ccf-8ca7-024cf089e1ed","name":"Post Webhook insert news","webhookId":"5a5b32f4-53dc-4ed5-a38b-e4509b88518e"}],"connections":{"Code":{"main":[[{"node":"MongoDB","type":"main","index":0}]]},"Post Webhook insert news":{"main":[[{"node":"Code","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"2adbf06b-b03c-4f9d-8a0f-0aafd569b4c6","triggerCount":0,"tags":[]}